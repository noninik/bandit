<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Agent Army</title>
    <link rel="stylesheet" href="/static/style.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>⚡</text></svg>">
</head>
<body>
    <div class="app">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-section">
                <div class="sidebar-title"><span class="folder-icon">▼</span> AGENTS</div>
                <div id="agentsList"></div>
            </div>

            <div class="sidebar-section">
                <div class="sidebar-title"><span class="folder-icon">▼</span> MODE</div>
                <div class="mode-toggle">
                    <label class="toggle-label">
                        <input type="checkbox" id="autoRoute" checked>
                        <span class="toggle-slider"></span>
                        <span class="toggle-text">🧠 Auto-routing</span>
                    </label>
                </div>
            </div>

            <div class="sidebar-section">
                <div class="sidebar-title"><span class="folder-icon">▼</span> 🚀 GENERATE</div>
                <div class="fullcycle-panel">
                    <input type="text" id="nicheInput" placeholder="Введи нишу..." class="niche-input">
                    <button class="fullcycle-btn" onclick="runFullCycle()">
                        🚀 Полный цикл
                        <span class="fullcycle-desc">Скан → Идеи → План → Карточка</span>
                    </button>
                    <button class="generate-btn" onclick="quickGenerate()">
                        ⚡ Быстрая генерация
                        <span class="fullcycle-desc">Только бизнес-идеи</span>
                    </button>
                </div>
            </div>

            <div class="sidebar-section">
                <div class="sidebar-title"><span class="folder-icon">▼</span> CHAINS</div>
                <div class="chain-buttons">
                    <button class="chain-btn" onclick="runChain(['scanner','idea_generator','business_plan'], 'Полный')">🔥 Скан → Идеи → План</button>
                    <button class="chain-btn" onclick="runChain(['researcher','strategist','marketer'], 'Стратегия')">📊 Анализ → Стратегия → Маркетинг</button>
                    <button class="chain-btn" onclick="runChain(['strategist','developer'], 'Тех')">🛠 Стратегия → Разработка</button>
                    <button class="chain-btn" onclick="runChain(['marketer','sales'], 'Продажи')">💰 Маркетинг → Продажи</button>
                </div>
            </div>

            <div class="sidebar-section">
                <div class="sidebar-title"><span class="folder-icon">▼</span> COMMANDS</div>
                <div id="commandsList"></div>
            </div>

            <div class="sidebar-section">
                <div class="sidebar-title"><span class="folder-icon">▼</span> SESSION</div>
                <div class="session-info">
                    <div class="session-row"><span>📊</span><span>messages: <span id="msgCount">0</span></span></div>
                    <div class="session-row"><span>🤖</span><span>agents: <span id="agentsUsed">0</span></span></div>
                    <div class="session-row"><span>📋</span><span>plans: <span id="plansCount">0</span></span></div>
                    <div class="session-row"><span>🕐</span><span>uptime: <span id="uptime">00:00</span></span></div>
                </div>
            </div>

            <div class="sidebar-section">
                <div class="sidebar-title"><span class="folder-icon">▼</span> QUESTS</div>
                <div id="questsList">
                    <div class="quest-item"><div class="quest-check" id="q1">☐</div><span>Сканировать соцсети</span></div>
                    <div class="quest-item"><div class="quest-check" id="q2">☐</div><span>Полный цикл</span></div>
                    <div class="quest-item"><div class="quest-check" id="q3">☐</div><span>Бизнес-план</span></div>
                    <div class="quest-item"><div class="quest-check" id="q4">☐</div><span>3+ агентов</span></div>
                    <div class="quest-item"><div class="quest-check" id="q5">☐</div><span>Экспорт</span></div>
                </div>
            </div>

            <div class="sidebar-footer">
                <button class="sidebar-btn" onclick="exportChat()">📥 Export</button>
                <button class="sidebar-btn danger" onclick="resetChat()">🗑 Clear</button>
            </div>
        </aside>

        <button class="mobile-toggle" onclick="toggleSidebar()">☰</button>

        <!-- Main Content — Split Screen -->
        <main class="main-content">
            <div class="tab-bar">
                <div class="tab-group">
                    <div class="tab active" onclick="showPanel('both')"><span class="tab-icon">⚡</span> ALL</div>
                    <div class="tab" onclick="showPanel('plans')"><span class="tab-icon">📋</span> PLANS</div>
                    <div class="tab" onclick="showPanel('terminal')"><span class="tab-icon">💬</span> TERMINAL</div>
                </div>
                <div class="tab-status">
                    <span class="status-dot" id="statusDot"></span>
                    <span id="statusText">Ready</span>
                </div>
            </div>

            <div class="split-screen" id="splitScreen">
                <!-- Left: Business Plans Cards -->
                <div class="plans-panel" id="plansPanel">
                    <div class="plans-header">
                        <h3>📋 Бизнес-планы</h3>
                        <span class="plans-count" id="plansCardCount">0</span>
                    </div>
                    <div class="plans-list" id="plansList">
                        <div class="plans-empty" id="plansEmpty">
                            <div class="empty-icon">📋</div>
                            <p>Пока нет планов</p>
                            <p class="empty-hint">Введи нишу слева и нажми 🚀 Полный цикл</p>
                        </div>
                    </div>
                </div>

                <!-- Divider -->
                <div class="panel-divider" id="panelDivider"></div>

                <!-- Right: Terminal -->
                <div class="terminal-panel" id="terminalPanel">
                    <div class="terminal" id="terminal">
                        <div class="terminal-welcome">
                            <pre class="ascii-art">
 ╔═══════════════════════════════════════════╗
 ║     AI  AGENT  ARMY  v5.0                ║
 ║     Split View + Business Plans           ║
 ╚═══════════════════════════════════════════╝</pre>
                            <div class="init-log"><span class="log-success">✓</span> System online</div>
                            <div class="init-log"><span class="log-success">✓</span> 8 agents loaded</div>
                            <div class="init-log"><span class="log-success">✓</span> Dual-model mode (Llama + Gemma)</div>
                            <div class="init-log"><span class="log-success">✓</span> Business plan cards ready</div>
                            <div class="init-log"><span class="log-info">ℹ</span> Enter niche → 🚀 Full Cycle → Get cards</div>
                        </div>
                    </div>

                    <div class="input-bar">
                        <div class="input-prompt">
                            <span class="prompt-agent" id="promptAgent">🧠</span>
                            <span class="prompt-arrow">❯</span>
                        </div>
                        <textarea id="userInput" placeholder="Task or /command..." rows="1" onkeydown="handleKeyDown(event)" spellcheck="false"></textarea>
                        <button onclick="sendMessage()" id="sendBtn">▶</button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="/static/script.js"></script>
</body>
</html>
